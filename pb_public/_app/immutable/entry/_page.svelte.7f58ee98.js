import{S as de,i as he,s as fe,k as y,l as k,m as j,h as w,n as p,b as J,J as B,H as $,a as M,c as O,p as x,G as _,K as I,L as D,M as q,N as me,O as Q,P as ve,q as se,r as oe,u as re}from"../chunks/index.3b35eacd.js";import{p as ge}from"../chunks/parse.d12b0d5b.js";import{j as N}from"../chunks/singletons.0e9c7a43.js";N.disable_scroll_handling;N.goto;N.invalidate;const be=N.invalidateAll;N.preload_data;N.preload_code;N.before_navigate;N.after_navigate;const ye=N.apply_action;function ke(c){const t=JSON.parse(c);return t.data&&(t.data=ge(t.data)),t}function Ee(c,t=()=>{}){const e=async({action:r,result:s,reset:a})=>{s.type==="success"&&(a!==!1&&HTMLFormElement.prototype.reset.call(c),await be()),(location.origin+location.pathname===r.origin+r.pathname||s.type==="redirect"||s.type==="error")&&ye(s)};async function n(r){var b,h,F;r.preventDefault();const s=new URL((b=r.submitter)!=null&&b.hasAttribute("formaction")?r.submitter.formAction:HTMLFormElement.prototype.cloneNode.call(c).action),a=new FormData(c),l=(h=r.submitter)==null?void 0:h.getAttribute("name");l&&a.append(l,((F=r.submitter)==null?void 0:F.getAttribute("value"))??"");const u=new AbortController;let v=!1;const g=await t({action:s,cancel:()=>v=!0,controller:u,data:a,form:c,submitter:r.submitter})??e;if(v)return;let P;try{const m=await fetch(s,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:a,signal:u.signal});P=ke(await m.text()),P.type==="error"&&(P.status=m.status)}catch(m){if((m==null?void 0:m.name)==="AbortError")return;P={type:"error",error:m}}g({action:s,data:a,form:c,update:m=>e({action:s,result:P,reset:m==null?void 0:m.reset}),result:P})}return HTMLFormElement.prototype.addEventListener.call(c,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(c,"submit",n)}}}function ee(c,t,e){const n=c.slice();return n[5]=t[e],n[6]=t,n[7]=e,n}function te(c,t,e){const n=c.slice();return n[8]=t[e],n}function ae(c,t,e){const n=c.slice();return n[11]=t[e],n}function le(c,t){let e,n=t[11].name+"",r,s;return{key:c,first:null,c(){e=y("option"),r=se(n),this.h()},l(a){e=k(a,"OPTION",{});var l=j(e);r=oe(l,n),l.forEach(w),this.h()},h(){e.__value=s=t[11].id,e.value=e.__value,this.first=e},m(a,l){J(a,e,l),_(e,r)},p(a,l){t=a,l&1&&n!==(n=t[11].name+"")&&re(r,n),l&1&&s!==(s=t[11].id)&&(e.__value=s,e.value=e.__value)},d(a){a&&w(e)}}}function ne(c,t){let e,n=t[8].name+"",r,s;return{key:c,first:null,c(){e=y("option"),r=se(n),this.h()},l(a){e=k(a,"OPTION",{});var l=j(e);r=oe(l,n),l.forEach(w),this.h()},h(){e.__value=s=t[8].id,e.value=e.__value,this.first=e},m(a,l){J(a,e,l),_(e,r)},p(a,l){t=a,l&1&&n!==(n=t[8].name+"")&&re(r,n),l&1&&s!==(s=t[8].id)&&(e.__value=s,e.value=e.__value)},d(a){a&&w(e)}}}function ie(c,t){let e,n,r,s,a,l=[],u=new Map,v,U,g,P,b,h=[],F=new Map,m,R,E,V,T,z,S,G,K,W;function ue(){t[1].call(n,t[6],t[7])}let H=t[0].projects;const X=o=>o[11].id;for(let o=0;o<H.length;o+=1){let i=ae(t,H,o),d=X(i);u.set(d,l[o]=le(d,i))}function ce(){t[2].call(g,t[6],t[7])}let C=t[0].modes;const Y=o=>o[8].id;for(let o=0;o<C.length;o+=1){let i=te(t,C,o),d=Y(i);F.set(d,h[o]=ne(d,i))}function pe(){t[3].call(E,t[6],t[7])}function _e(){t[4].call(T,t[6],t[7])}return{key:c,first:null,c(){e=y("form"),n=y("input"),r=M(),s=y("div"),a=y("select");for(let o=0;o<l.length;o+=1)l[o].c();U=M(),g=y("input"),P=M(),b=y("select");for(let o=0;o<h.length;o+=1)h[o].c();R=M(),E=y("input"),V=M(),T=y("input"),z=M(),S=y("input"),G=M(),this.h()},l(o){e=k(o,"FORM",{method:!0,class:!0,draggable:!0});var i=j(e);n=k(i,"INPUT",{type:!0,name:!0,class:!0}),r=O(i),s=k(i,"DIV",{class:!0});var d=j(s);a=k(d,"SELECT",{name:!0});var A=j(a);for(let L=0;L<l.length;L+=1)l[L].l(A);A.forEach(w),U=O(d),g=k(d,"INPUT",{name:!0,class:!0,type:!0}),d.forEach(w),P=O(i),b=k(i,"SELECT",{name:!0});var f=j(b);for(let L=0;L<h.length;L+=1)h[L].l(f);f.forEach(w),R=O(i),E=k(i,"INPUT",{name:!0,class:!0,type:!0}),V=O(i),T=k(i,"INPUT",{name:!0,class:!0,type:!0}),z=O(i),S=k(i,"INPUT",{type:!0,class:!0}),G=O(i),i.forEach(w),this.h()},h(){var o;p(n,"type","text"),p(n,"name","id"),p(n,"class","hidden"),p(a,"name","project"),p(g,"name","task"),p(g,"class","w-full p-1"),p(g,"type","text"),p(s,"class","flex flex-1 basis-48 flex-col gap-2"),p(b,"name","mode"),p(E,"name","estimate"),p(E,"class","p-1"),p(E,"type","text"),p(T,"name","actual"),p(T,"class","p-1"),p(T,"type","text"),p(S,"type","submit"),S.value="",p(S,"class","hidden"),p(e,"method","POST"),p(e,"class","my-2 flex gap-4 rounded-xl bg-slate-200 p-4"),p(e,"draggable",!0),x(e,"color",(o=t[5].expand)==null?void 0:o.mode.color),this.first=e},m(o,i){var d,A;J(o,e,i),_(e,n),I(n,t[5].id),_(e,r),_(e,s),_(s,a);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(a,null);D(a,(d=t[5].expand)==null?void 0:d.project.id),_(s,U),_(s,g),I(g,t[5].name),_(e,P),_(e,b);for(let f=0;f<h.length;f+=1)h[f]&&h[f].m(b,null);D(b,(A=t[5].expand)==null?void 0:A.mode.id),_(e,R),_(e,E),I(E,t[5].estimate),_(e,V),_(e,T),I(T,t[5].actual),_(e,z),_(e,S),_(e,G),K||(W=[q(n,"input",ue),q(g,"input",ce),q(E,"input",pe),q(T,"input",_e),me(Ee.call(null,e))],K=!0)},p(o,i){var d,A,f,L,Z;t=o,i&1&&n.value!==t[5].id&&I(n,t[5].id),i&1&&(H=t[0].projects,l=B(l,i,X,1,t,H,u,a,Q,le,null,ae)),i&1&&v!==(v=(d=t[5].expand)==null?void 0:d.project.id)&&D(a,(A=t[5].expand)==null?void 0:A.project.id),i&1&&g.value!==t[5].name&&I(g,t[5].name),i&1&&(C=t[0].modes,h=B(h,i,Y,1,t,C,F,b,Q,ne,null,te)),i&1&&m!==(m=(f=t[5].expand)==null?void 0:f.mode.id)&&D(b,(L=t[5].expand)==null?void 0:L.mode.id),i&1&&E.value!==t[5].estimate&&I(E,t[5].estimate),i&1&&T.value!==t[5].actual&&I(T,t[5].actual),i&1&&x(e,"color",(Z=t[5].expand)==null?void 0:Z.mode.color)},d(o){o&&w(e);for(let i=0;i<l.length;i+=1)l[i].d();for(let i=0;i<h.length;i+=1)h[i].d();K=!1,ve(W)}}}function Te(c){let t,e=[],n=new Map,r=c[0].tasks;const s=a=>a[5].id;for(let a=0;a<r.length;a+=1){let l=ee(c,r,a),u=s(l);n.set(u,e[a]=ie(u,l))}return{c(){t=y("div");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=k(a,"DIV",{class:!0});var l=j(t);for(let u=0;u<e.length;u+=1)e[u].l(l);l.forEach(w),this.h()},h(){p(t,"class","container m-auto max-w-5xl")},m(a,l){J(a,t,l);for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(t,null)},p(a,[l]){l&1&&(r=a[0].tasks,e=B(e,l,s,1,a,r,n,t,Q,ie,null,ee))},i:$,o:$,d(a){a&&w(t);for(let l=0;l<e.length;l+=1)e[l].d()}}}function we(c,t,e){let{data:n}=t;function r(u,v){u[v].id=this.value,e(0,n)}function s(u,v){u[v].name=this.value,e(0,n)}function a(u,v){u[v].estimate=this.value,e(0,n)}function l(u,v){u[v].actual=this.value,e(0,n)}return c.$$set=u=>{"data"in u&&e(0,n=u.data)},[n,r,s,a,l]}class Ae extends de{constructor(t){super(),he(this,t,we,Te,fe,{data:0})}}export{Ae as default};
